# GitLab рдХреЗ рд▓рд┐рдП Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ

[English](../README.md) | [ф╕нцЦЗ](./README_CN.md) | [цЧецЬмшкЮ](./README_JA.md) | рд╣рд┐рдиреНрджреА | [эХЬъ╡ньЦ┤](./README_KO.md) | [р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в](./README_TH.md) | [╪з┘Д╪╣╪▒╪и┘К╪й](./README_AR.md)

GitHub Copilot SDK рдФрд░ GitLab CI/CD рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд рдПрдХ рдкреВрд░реНрдг рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯред рдпрд╣ рд╕рд┐рд╕реНрдЯрдо issue assignments, merge request comments, рдФрд░ merge request reviewer assignments рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрд╡рд╛рдпрддреНрдд рдХреЛрдб рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдФрд░ рдмреБрджреНрдзрд┐рдорд╛рди рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛ рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред

## рдбреЗрдореЛ рдФрд░ рдЙрджрд╛рд╣рд░рдг
**Youtube рдбреЗрдореЛ рд╡реАрдбрд┐рдпреЛ**

рд╕реЗрдЯрдЕрдк:
- [Copilot Coding Agent for GitLab - Setup Guide](https://www.youtube.com/watch?v=aSQVP1AAD60)

рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ:
- [Copilot Coding Agent for GitLab - How to use 2:30 тАУ Create an issue in the app repo and assign it to Copilot](https://www.youtube.com/watch?v=med7Bfff_m4&t=150s)
- [Copilot Coding Agent for GitLab - How to use 11:24 тАУ Let Copilot make some updates in the merge request via comments](https://www.youtube.com/watch?v=med7Bfff_m4&t=684s)

**рдЙрджрд╛рд╣рд░рдг рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА**
- рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ GitLab рдбреЗрдореЛ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА [app-repo-01](https://gitlab.com/agentic-devops/app-repo-01)
- Issue: [рдПрдХ Webhook рд░рд┐рд╕реАрд╡рд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди](https://gitlab.com/agentic-devops/app-repo-01/-/issues/18)
- MR: [рдПрдХ Webhook рд░рд┐рд╕реАрд╡рд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди (#18)](https://gitlab.com/agentic-devops/app-repo-01/-/merge_requests/23)
- Comment рдХреЗ рд╕рд╛рде MR рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ: [@copilot-gitlab-agent readme рдХреЛ рд╣рд┐рдВрджреА рдореЗрдВ рдмрджрд▓реЗрдВ](https://gitlab.com/agentic-devops/app-repo-01/-/merge_requests/23#note_2929895227)
- рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛: [MR рдореЗрдВ Copilot рдХреЛ рд╕рдореАрдХреНрд╖рд╛ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ](https://gitlab.com/agentic-devops/app-repo-01/-/merge_requests/23#note_2929964796)

## ЁЯПЧя╕П рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

```mermaid
graph TB
    subgraph "App Repository (Target Repo)"
        A[GitLab Issue/MR] -->|Issue assign to Copilot| C[Webhook Trigger]
        A[GitLab Issue/MR] -->|MR comment @copilot-gitlab-agent| C[Webhook Trigger]
        A[GitLab Issue/MR] -->|MR assign Copilot as Reviewer| C[Webhook Trigger]
    end

    subgraph "Webhook Service"
        C -->|HTTP POST| D[Fastify Service]
        D -->|Validate & Extract| E[Pipeline Variables]
        E -->|Trigger| F[GitLab API]
    end

    subgraph "Copilot Coding Agent Repo"
        F -->|Start Pipeline| G[CI/CD Pipeline]
        G -->|Issue: ack тЖТ plan тЖТ create_mr| H[Issue Workflow]
        G -->|MR Note: mr_update only| I[MR Note Workflow]
        G -->|MR Reviewer: mr_review| L[MR Review Workflow]
        H -->|implement тЖТ finalize| J[GitHub Copilot SDK]
        I -->|implement changes| J
        L -->|perform code review| J
        J -->|Generate Code| K[Git Commit & Push]
    end

    K -->|Update| A
    J -->|Post Comments| A
    L -->|Post Review Comments| A

    style D fill:#e1f5ff
    style G fill:#fff4e1
    style J fill:#e8f5e9
```

### рд╕рд┐рд╕реНрдЯрдо рдШрдЯрдХ

1. **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА**: рдЖрдкрдХрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдЬрд╣рд╛рдБ рд╡рд┐рдХрд╛рд╕ рд╣реЛрддрд╛ рд╣реИ
2. **Webhook рд╕реЗрд╡рд╛**: Fastify-рдЖрдзрд╛рд░рд┐рдд рд░рд┐рд▓реЗ рд╕реЗрд╡рд╛ рдЬреЛ GitLab рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рддреА рд╣реИ
3. **Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА**: CI/CD рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░ рдЬреЛ рдХреЛрдбрд┐рдВрдЧ рд╕реНрд╡рдЪрд╛рд▓рди рдЪрд▓рд╛рддрд╛ рд╣реИ

### рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЕрд╡рд▓реЛрдХрди

**Issue рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ** (рдкреВрд░реНрдг рд╕реНрд╡рдЪрд╛рд▓рди):
```
Issue рдХреЛ Copilot рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ тЖТ Webhook тЖТ Pipeline рдЯреНрд░рд┐рдЧрд░ тЖТ
Issue рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ тЖТ TODO рдпреЛрдЬрдирд╛ рдмрдирд╛рдПрдВ тЖТ MR рдмрдирд╛рдПрдВ тЖТ
рдХреЛрдб рд▓рд╛рдЧреВ рдХрд░реЗрдВ тЖТ рдкрд░рд┐рд╡рд░реНрддрди Push рдХрд░реЗрдВ тЖТ MR рдФрд░ Issue рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ
```

**MR Note рд╡рд░реНрдХрдлрд╝реНрд▓реЛ** (рддреНрд╡рд░рд┐рдд рдЕрдкрдбреЗрдЯ):
```
MR рдореЗрдВ @copilot-gitlab-agent рдХреЛ Comment рдХрд░реЗрдВ тЖТ Webhook тЖТ Pipeline рдЯреНрд░рд┐рдЧрд░ тЖТ
рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ тЖТ рдкрд░рд┐рд╡рд░реНрддрди рд▓рд╛рдЧреВ рдХрд░реЗрдВ тЖТ Source Branch рдореЗрдВ Push рдХрд░реЗрдВ тЖТ
рд╕рд╛рд░рд╛рдВрд╢ Comment рдкреЛрд╕реНрдЯ рдХрд░реЗрдВ
```

**MR Reviewer рд╡рд░реНрдХрдлрд╝реНрд▓реЛ** (рдмреБрджреНрдзрд┐рдорд╛рди рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛):
```
Copilot рдХреЛ MR Reviewer рдХреЗ рд░реВрдк рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ тЖТ Webhook тЖТ Pipeline рдЯреНрд░рд┐рдЧрд░ тЖТ
рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ тЖТ рдХреЛрдб рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ тЖТ рд╡реНрдпрд╛рдкрдХ рд╕рдореАрдХреНрд╖рд╛ рдХрд░реЗрдВ тЖТ
рд╡рд┐рд╕реНрддреГрдд рд╕рдореАрдХреНрд╖рд╛ Comment рдкреЛрд╕реНрдЯ рдХрд░реЗрдВ
```

## ЁЯУЛ рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рдПрдВ

### рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдХрд░рдг
- API рдПрдХреНрд╕реЗрд╕ рдХреЗ рд╕рд╛рде **GitLab рдЕрдХрд╛рдЙрдВрдЯ**
- **GitLab Runner (Docker/Kubernetes executor)** (CI/CD рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП)
- **GitHub Copilot** рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди (SDK API рдПрдХреНрд╕реЗрд╕ рдХреЗ рд▓рд┐рдП)
- **Docker** (рд╡реИрдХрд▓реНрдкрд┐рдХ, webhook рд╕реЗрд╡рд╛ рдХреЛ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП)

### рдЖрд╡рд╢реНрдпрдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ
- **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА**: Maintainer рднреВрдорд┐рдХрд╛ (webhooks рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ MR рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП)
- **Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА**: Owner рднреВрдорд┐рдХрд╛ (CI/CD рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП)
- **GitLab Personal Access Token** рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдХреЛрдк рдХреЗ рд╕рд╛рде:
  - `api` (рдкреВрд░реНрдг API рдПрдХреНрд╕реЗрд╕)
  - `read_repository`
  - `write_repository`

## ЁЯЪА рдкреНрд░рд╢рд╛рд╕рдХ рд╕реЗрдЯрдЕрдк рдЧрд╛рдЗрдб

### рдЪрд░рдг 1: Copilot рдмреЙрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдПрдВ (рд╡реИрдХрд▓реНрдкрд┐рдХ рд▓реЗрдХрд┐рди рдЕрдиреБрд╢рдВрд╕рд┐рдд)
> рдмреЗрд╣рддрд░ рдЕрдиреБрдорддрд┐ рдкреНрд░рдмрдВрдзрди рдФрд░ рдЧрддрд┐рд╡рд┐рдзрд┐ рдСрдбрд┐рдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП Copilot рдПрдЬреЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдорд░реНрдкрд┐рдд GitLab рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдХрд╛рдЙрдВрдЯ рдмрдирд╛рдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЖрдк рдПрдХ рдореМрдЬреВрджрд╛ рдЕрдХрд╛рдЙрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд┐рдд рдирд╣реАрдВ рд╣реИред

1. "Copilot" рдпрд╛ рдЗрд╕реА рддрд░рд╣ рдХреЗ рдирд╛рдо рд╕реЗ рдПрдХ рдирдпрд╛ GitLab рдЕрдХрд╛рдЙрдВрдЯ рдмрдирд╛рдПрдВ
2. рдЗрд╕ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ Personal Access Token рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ:
   - **User Settings** тЖТ **Personal Access Tokens** рдкрд░ рдЬрд╛рдПрдВ
   - Token рдирд╛рдо: `copilot-automation`
   - рд╕реНрдХреЛрдк: рд╕рднреА рд╕реНрдХреЛрдк рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ (рдпрд╛ рдиреНрдпреВрдирддрдо: `api`, `read_repository`, `write_repository`)
   - рдЯреЛрдХрди рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╕рд╣реЗрдЬреЗрдВ
   ![#gitlab-pat](../images/gitlab-pat.png)

3. рдЗрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЙрдЪрд┐рдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ (рдПрдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЪреБрдиреЗрдВ):
   - **рд╡рд┐рдХрд▓реНрдк A (рд╕рдВрдЧрдарди-рд╡реНрдпрд╛рдкреА рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд╢рдВрд╕рд┐рдд)**: GitLab **Administrator** рдпрд╛ Group **Owner** рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд░реЗрдВ
     - рдпрд╣ Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ GitLab рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдпрд╛ рдЧреНрд░реБрдк рдореЗрдВ рд╕рднреА рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ
     - рдХрдИ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ
   - **рд╡рд┐рдХрд▓реНрдк B (рд╕реАрдорд┐рдд рд╕реНрдХреЛрдк рдХреЗ рд▓рд┐рдП рдЕрдиреБрд╢рдВрд╕рд┐рдд)**: рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╕рджрд╕реНрдп рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ
     - рднреВрдорд┐рдХрд╛: **Developer** рдпрд╛ **Maintainer**
     - рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рдирд┐рдпрдВрддреНрд░рдг, рдпрджрд┐ рдЖрдк рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдПрдХреНрд╕реЗрд╕ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдЙрдкрдпреБрдХреНрдд
   - рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ issues рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ merge requests рдмрдирд╛рдПрдЧрд╛

### рдЪрд░рдг 2: Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗрдЯрдЕрдк рдХрд░реЗрдВ
> Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП

1. **рдЗрд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ Git URL рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ GitLab рдореЗрдВ рдЖрдпрд╛рдд рдХрд░реЗрдВ**
   - рдЪрд░рдг 1 рдореЗрдВ рдмрдирд╛рдП рдЧрдП Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ owner рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдлрд┐рд░ GitLab рдореЗрдВ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдЖрдпрд╛рдд рдХрд░реЗрдВ:
     ```bash
     https://github.com/trycatchkamal/gitlab-copilot-agent.git
     ```
      ![#gl-create-project](../images/gl-create-project.png)
      ![#gl-import-project](../images/gl-import-project.png)
      ![#gl-repo-url](../images/gl-repo-url.png)
   - рдирдИ рдЖрдпрд╛рддрд┐рдд рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреА рджреГрд╢реНрдпрддрд╛ Internal рдкрд░ рд╕реЗрдЯ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП
      ![#gl-import-settings](../images/gl-import-settings.png)

2. **CI/CD рд╡реЗрд░рд┐рдПрдмрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ**

   **Settings** тЖТ **CI/CD** тЖТ **Variables** рдкрд░ рдЬрд╛рдПрдВ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ:

   | рд╡реЗрд░рд┐рдПрдмрд▓ | рд╡рд┐рд╡рд░рдг | Protected | Masked |
   |----------|-------------|-----------|--------|
   | `GITLAB_TOKEN` | Personal access token (рдЪрд░рдг 1 рд╕реЗ) | тЬЕ | тЬЕ |
   | `GITHUB_TOKEN` | GitHub Copilot SDK рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди, рдПрдХ рд╡реИрдз GitHub Copilot рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╕рд╣рд┐рдд | тЬЕ | тЬЕ |

   "Copilot Requests" рдЕрдиреБрдорддрд┐ рд╕рдХреНрд╖рдо рдХреЗ рд╕рд╛рде fine-grained PAT `GITHUB_TOKEN` рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:
   - https://github.com/settings/personal-access-tokens/new рдкрд░ рдЬрд╛рдПрдВ
   - "Permissions" рдХреЗ рдЕрдВрддрд░реНрдЧрдд, "add permissions" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ "Copilot Requests" рдЪреБрдиреЗрдВ
   - рдЕрдкрдирд╛ рдЯреЛрдХрди рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ
   ![#copilot-pat](../images/copilot-pat.png)


   ![#cicd-variables](../images/cicd-variables.png)

   рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ pipeline variables рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реА рднреВрдорд┐рдХрд╛ рдХреЛ Developer рдореЗрдВ рдмрджрд▓реЗрдВ
   ![#ppl-variables-permission](../images/ppl-variables-permission.png)

3. **GitLab Runner рд╕реЗрдЯрдЕрдк рдХрд░реЗрдВ**
   > рдпрджрд┐ рдЖрдкрдХреЗ GitLab рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ Docker/Kubernetes executors рдХреЗ рд╕рд╛рде рдЙрдкрд▓рдмреНрдз Runners рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕ рдЪрд░рдг рдХреЛ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред

   рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ GitLab Runner рд╣реИ:
   - Docker executor (рдЕрдиреБрд╢рдВрд╕рд┐рдд)
   - Docker image рддрдХ рдкрд╣реБрдБрдЪ: `node:20-alpine`

   рдпрджрд┐ рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ Runner рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рдЯреИрдЧ рд╣реИрдВ, рдпрд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ `.gitlab-ci.yml` рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВред рдирдпрд╛ Runner рдкрдВрдЬреАрдХрд░рдг GitLab рдХреЗ рдкреЗрдЬ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ рдкреВрд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдпрд╛ рдЧреНрд░реБрдк рд╕реНрддрд░ рдкрд░ рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣рд╛рдБ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реНрддрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ:
   ![#runner-register](../images/runner-register.png)

### рдЪрд░рдг 3: Webhook рд╕реЗрд╡рд╛ рдХреЛ Deploy рдХрд░реЗрдВ

1. **`.env` рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ**
   ```bash
   cat > .env << EOF
   PIPELINE_TRIGGER_TOKEN=your-trigger-token, рдЪрд░рдг 2 рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ Settings тЖТ CI/CD тЖТ Pipeline trigger tokens рдореЗрдВ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ
   PIPELINE_PROJECT_ID=your-project-id, рдЗрд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ ID (Settings тЖТ General рдореЗрдВ рдорд┐рд▓рддрд╛ рд╣реИ)
   PIPELINE_REF=main
   GITLAB_API_BASE=https://gitlab.com # рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ self-hosted instance рдореЗрдВ рдмрджрд▓реЗрдВ
   WEBHOOK_SECRET_TOKEN=
   COPILOT_AGENT_USERNAME=copilot-gitlab-agent # Copilot рдмреЙрдЯ рдХрд╛ GitLab ID
   COPILOT_AGENT_COMMIT_EMAIL=33458317-copilot-gitlab-agent@users.noreply.gitlab.com # git commits рдХреЗ рд▓рд┐рдП рдИрдореЗрд▓
   LISTEN_HOST=0.0.0.0
   LISTEN_PORT=8080
   ENABLE_INLINE_REVIEW_COMMENTS=true
   COPILOT_LANGUAGE=hi
   COPILOT_MODEL=gpt-4.1
   EOF
   ```

   - `PIPELINE_TRIGGER_TOKEN`: рдЪрд░рдг 2 рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ **Settings** тЖТ **CI/CD** тЖТ **Pipeline trigger tokens** рдореЗрдВ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЧрдпрд╛
   ![#ppl-trigger-token](../images/ppl-trigger-token.png)
   - `PIPELINE_PROJECT_ID`: рдЗрд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ ID (**Settings** тЖТ **General** рдореЗрдВ рдорд┐рд▓рддрд╛ рд╣реИ)
   ![#ppl-project-id](../images/ppl-project-id.png)
   - `COPILOT_AGENT_USERNAME`: рдЪрд░рдг 1 рдореЗрдВ рдмрдирд╛рдП рдЧрдП Copilot рдмреЙрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ GitLab ID
   ![#gitlab-id](../images/gitlab-id.png)

2. **Docker рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдПрдВ**
   ```bash
   docker run -itd \
     --name gitlab-copilot-agent \
     -p 8080:8080 \
     --env-file .env \
     --restart unless-stopped \
     trycatchkamal/gitlab-copilot-agent:latest
   ```
3. **рд╕реНрд░реЛрдд рд╕реЗ рдЪрд▓рд╛рдПрдВ (рд╡реИрдХрд▓реНрдкрд┐рдХ)**
   ```bash
   git clone https://github.com/trycatchkamal/gitlab-copilot-agent.git
   cd gitlab-copilot-agent/
   pnpm start
   ```
4. **Hook URL**
   webhook рд╕реЗрд╡рд╛ рдХрд╛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ URL рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП,
   - `http://your-server-ip:8080/gitlab-events`

### рдЪрд░рдг 4: рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ Webhooks рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ
> рдЖрдорддреМрд░ рдкрд░, рдЬреЛ рдбреЗрд╡рд▓рдкрд░реНрд╕ Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рдЕрдкрдиреА рдЦреБрдж рдХреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ webhook рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдирд╣реАрдВред

1. рдЕрдкрдиреЗ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА** тЖТ **Settings** тЖТ **Webhooks** рдкрд░ рдЬрд╛рдПрдВ

2. **Webhook рдмрдирд╛рдПрдВ**
   - URL: `http://your-server-ip:8080/gitlab-events`
   - Secret Token: (`WEBHOOK_SECRET_TOKEN` рдХреЗ рд╕рдорд╛рди)
   - Trigger: тЬЕ **Issues events**, тЬЕ **Comments** (note events), рдФрд░ тЬЕ **Merge request events**
   - **Add webhook** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ
   ![#webhook](../images/webhook.png)

3. **webhook рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ**
   - **Test** тЖТ **Issue events** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ
   - webhook рд╕реЗрд╡рд╛ рд▓реЙрдЧ рдореЗрдВ рд╕рдлрд▓ рд░рд┐рд╕реЗрдкреНрд╢рди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ
   - HTTP 200/202 рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ

### рдЪрд░рдг 5: рд╕рддреНрдпрд╛рдкрди

1. **Issue рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ**
   - рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдПрдХ рдкрд░реАрдХреНрд╖рдг issue рдмрдирд╛рдПрдВ
   - рдЗрд╕реЗ Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ
   ![#issue-assign](../images/issue-assign.png)
   - Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рд░рд┐рдкреЙ рдореЗрдВ CI/CD pipeline рдЯреНрд░рд┐рдЧрд░ рджреЗрдЦреЗрдВ
   ![#coding-agent-ppl](../images/coding-agent-ppl.png)
   - MR рдирд┐рд░реНрдорд╛рдг рдФрд░ рдХреЛрдб рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ
   ![#mr1](../images/mr1.png)
   ![#mr2](../images/mr2.png)

2. **MR Note рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ**
   - рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдПрдХ рдкрд░реАрдХреНрд╖рдг MR рдмрдирд╛рдПрдВ
   - Comment: `@copilot-gitlab-agent add a hello world function`
   ![#mr-update](../images/mr-update.png)
   - pipeline рдирд┐рд╖реНрдкрд╛рджрди рдФрд░ рдХреЛрдб рдкрд░рд┐рд╡рд░реНрддрди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ
   ![#mr-update-ppl](../images/mr-update-ppl.png)

3. **MR Reviewer рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ**
   - рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдПрдХ рдкрд░реАрдХреНрд╖рдг MR рдмрдирд╛рдПрдВ рдпрд╛ рдЦреЛрд▓реЗрдВ, Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ Reviewer рдХреЗ рд░реВрдк рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ
   ![#mr-reviewer](../images/mr-reviewer.png)
   - pipeline рдирд┐рд╖реНрдкрд╛рджрди рдФрд░ рд╕рдореАрдХреНрд╖рд╛ comment рдкреЛрд╕реНрдЯрд┐рдВрдЧ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ, Copilot рджреНрд╡рд╛рд░рд╛ рдкреЛрд╕реНрдЯ рдХреА рдЧрдИ рд╡рд┐рд╕реНрддреГрдд рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛ рд░рд┐рдкреЛрд░реНрдЯ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ
   ![#mr-review-result](../images/mr-review-result.png)

4. **рд▓реЙрдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ**
   ```bash
   # Webhook рд╕реЗрд╡рд╛ рд▓реЙрдЧ
   docker logs -f gitlab-copilot-agent

   # рд╕рд╣реЗрдЬреЗ рдЧрдП webhook payloads рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ
   ls -la hooks/

   # Pipeline рд▓реЙрдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ
   # Copilot рдХреЛрдбрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рд░рд┐рдкреЙ тЖТ CI/CD тЖТ Pipelines рдкрд░ рдЬрд╛рдПрдВ
   ```

## ЁЯУЦ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЧрд╛рдЗрдб

### рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП: Issue рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ

1. **рдЕрдкрдиреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдПрдХ Issue рдмрдирд╛рдПрдВ**
   ```markdown
   ## рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ
   - рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд▓рд╛рдЧреВ рдХрд░реЗрдВ
   - рдкрд╛рд╕рд╡рд░реНрдб рд╣реИрд╢рд┐рдВрдЧ рдЬреЛрдбрд╝реЗрдВ
   - рд▓реЙрдЧрд┐рди endpoint рдмрдирд╛рдПрдВ
   - JWT рдЯреЛрдХрди рдЬрдирд░реЗрд╢рди рдЬреЛрдбрд╝реЗрдВ
   ```

2. **Copilot рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ**
   - issue рдкреЗрдЬ рдореЗрдВ, рдЗрд╕реЗ "Copilot" рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ
   - рд╕рд┐рд╕реНрдЯрдо рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдЧрд╛

3. **рдкреНрд░рдЧрддрд┐ рдЯреНрд░реИрдХ рдХрд░реЗрдВ**
   - Copilot pipeline рд▓рд┐рдВрдХ рдХреЗ рд╕рд╛рде рдПрдХ acknowledgment comment рдкреЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИ
   - TODO checklist рдХреЗ рд╕рд╛рде рдПрдХ merge request рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ
   - рдХреЛрдб рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ
   - рдЕрдВрддрд┐рдо comment рдкреВрд░реНрдгрддрд╛ рдХреА рд╕реВрдЪрдирд╛ рджреЗрддрд╛ рд╣реИ

   > **рдиреЛрдЯ**: рдпрджрд┐ issue рдХреЗ рд▓рд┐рдП рдПрдХ merge request рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рд╣реИ, рддреЛ Copilot рдЗрд╕реЗ рдкрд╣рдЪрд╛рди рд▓реЗрдЧрд╛ рдФрд░ issue рдореЗрдВ рдПрдХ рд╕реВрдЪрдирд╛ рдкреЛрд╕реНрдЯ рдХрд░реЗрдЧрд╛, рдЖрдкрдХреЛ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдмрдирд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдореМрдЬреВрджрд╛ MR рдореЗрдВ рдХрд╛рдо рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдЧрд╛ред

4. **рд╕рдореАрдХреНрд╖рд╛ рдФрд░ Merge рдХрд░реЗрдВ**
   - MR рдореЗрдВ рдЙрддреНрдкрдиреНрди рдХреЛрдб рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░реЗрдВ
   - рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ (рдиреАрдЪреЗ MR Note рдЙрдкрдпреЛрдЧ рджреЗрдЦреЗрдВ)
   - рд╕рдВрддреБрд╖реНрдЯ рд╣реЛрдиреЗ рдкрд░ рд╕реНрд╡реАрдХреГрдд рдХрд░реЗрдВ рдФрд░ merge рдХрд░реЗрдВ

### рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП: MR Note рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ

1. **рдПрдХ рдореМрдЬреВрджрд╛ MR рдореЗрдВ**, рдПрдХ comment рдЬреЛрдбрд╝реЗрдВ:
   ```
   @copilot-gitlab-agent add error handling to the login function
   ```

2. **рд╕рдорд░реНрдерд┐рдд рдирд┐рд░реНрджреЗрд╢**
   - рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдЬреЛрдбрд╝реЗрдВ: `@copilot-gitlab-agent add unit tests for authentication`
   - рдмрдЧреНрд╕ рдареАрдХ рдХрд░реЗрдВ: `@copilot-gitlab-agent fix the null pointer exception in line 45`
   - рд░рд┐рдлреИрдХреНрдЯрд░ рдХрд░реЗрдВ: `@copilot-gitlab-agent refactor the user service to use dependency injection`
   - рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ: `@copilot-gitlab-agent update dependencies to latest versions`

3. **Copilot рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░реЗрдЧрд╛**:
   - рдЖрдкрдХреЗ рдЕрдиреБрд░реЛрдз рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ
   - рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВ
   - MR рдмреНрд░рд╛рдВрдЪ рдореЗрдВ commit рдФрд░ push рдХрд░реЗрдВ
   - рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢ рдкреЛрд╕реНрдЯ рдХрд░реЗрдВ

### рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП: рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП MR Reviewer рдХрд╛ рдЙрдкрдпреЛрдЧ

1. **MR рдкреЗрдЬ рдкрд░**, Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ Reviewer рдХреЗ рд░реВрдк рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ
   - MR рдкреЗрдЬ рдХреЗ рджрд╛рдИрдВ рдУрд░ "Reviewers" рд╡рд┐рдХрд▓реНрдк рдЦреЛрдЬреЗрдВ
   - Copilot рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЪреБрдиреЗрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, copilot-gitlab-agent)

2. **Copilot рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░реЗрдЧрд╛**:
   - рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ
   - source рдФрд░ target branches рдХреЗ рдмреАрдЪ рд╕рднреА рдХреЛрдб рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ
   - рд╡реНрдпрд╛рдкрдХ рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛ рдХрд░реЗрдВ рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ:
     - рдХреЛрдб рдЧреБрдгрд╡рддреНрддрд╛ рдФрд░ рд░рдЦрд░рдЦрд╛рд╡
     - рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдПрдВ рдФрд░ рдбрд┐рдЬрд╝рд╛рдЗрди рдкреИрдЯрд░реНрди
     - рд╕реБрд░рдХреНрд╖рд╛ рднреЗрджреНрдпрддрд╛ рдЬрд╛рдБрдЪ
     - рдкреНрд░рджрд░реНрд╢рди рд╡рд┐рд╢реНрд▓реЗрд╖рдг
     - рдкрд░реАрдХреНрд╖рдг рдХрд╡рд░реЗрдЬ рдореВрд▓реНрдпрд╛рдВрдХрди
     - рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдкреВрд░реНрдгрддрд╛
   - MR рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рд╕рдореАрдХреНрд╖рд╛ рд░рд┐рдкреЛрд░реНрдЯ рдкреЛрд╕реНрдЯ рдХрд░реЗрдВ, рдЧрдВрднреАрд░рддрд╛ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдЧреАрдХреГрдд
   - рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реБрдзрд╛рд░ рд╕реБрдЭрд╛рд╡ рдФрд░ рдЕрдиреБрд╢рдВрд╕рд┐рдд рдлрд┐рдХреНрд╕ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ

3. **рд╕рдореАрдХреНрд╖рд╛ рд░рд┐рдкреЛрд░реНрдЯ рдХреА рд╕рд╛рдордЧреНрд░реА**:
   - рд╕рдордЧреНрд░ рдореВрд▓реНрдпрд╛рдВрдХрди рд╕рд╛рд░рд╛рдВрд╢
   - рдЧрдВрднреАрд░рддрд╛ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдЧреАрдХреГрдд рд╕рдорд╕реНрдпрд╛рдПрдВ (Critical, Major, Minor, Suggestions)
   - рдкреНрд░рддреНрдпреЗрдХ рд╕рдорд╕реНрдпрд╛ рдореЗрдВ рдлрд╝рд╛рдЗрд▓ рд╕реНрдерд╛рди, рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╡рд░рдг, рдФрд░ рдлрд┐рдХреНрд╕ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ
   - рдЕрдВрддрд┐рдо рд╕рдореАрдХреНрд╖рд╛ рд╕рд┐рдлрд╛рд░рд┐рд╢: APPROVE, REQUEST_CHANGES, рдпрд╛ NEEDS_DISCUSSION

### рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдПрдВ

**рдкреНрд░рднрд╛рд╡реА Issue рд╡рд┐рд╡рд░рдг рд▓рд┐рдЦрдирд╛**:
- рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рд╣реЗрдВ
- рд╕реНрд╡реАрдХреГрддрд┐ рдорд╛рдирджрдВрдб рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ
- рд╕рдВрджрд░реНрдн рдФрд░ рдЙрджрд╛рд╣рд░рдг рдкреНрд░рджрд╛рди рдХрд░реЗрдВ
- рдХрдИ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

**MR Note рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ**:
- рдкреНрд░рддрд┐ comment рдПрдХ рд╕реНрдкрд╖реНрдЯ рдирд┐рд░реНрджреЗрд╢
- рдЬрдм рднреА рд╕рдВрднрд╡ рд╣реЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрд╝рд╛рдЗрд▓реЛрдВ/functions рдХрд╛ рд╕рдВрджрд░реНрдн рджреЗрдВ
- рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд▓реЗрдХрд┐рди рд╡рд░реНрдгрдирд╛рддреНрдордХ рд░рд╣реЗрдВ
- рдЕрдЧрд▓реЗ рдирд┐рд░реНрджреЗрд╢ рд╕реЗ рдкрд╣рд▓реЗ рдкреВрд░реНрдгрддрд╛ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ

**рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛**:
- рд╣рдореЗрд╢рд╛ рдЙрддреНрдкрдиреНрди рдХреЛрдб рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░реЗрдВ
- рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ
- рд╕реБрд░рдХреНрд╖рд╛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ
- рдХреЛрдбрд┐рдВрдЧ рдорд╛рдирдХ рдЕрдиреБрдкрд╛рд▓рди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ

## ЁЯФз рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕рдВрджрд░реНрдн

### рдордзреНрдпрд╡рд░реНрддреА рдлрд╝рд╛рдЗрд▓реЗрдВ (Git рд╕реЗ рд╕реНрд╡рддрдГ-рдмрд╣рд┐рд╖реНрдХреГрдд)

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝рд╛рдЗрд▓реЗрдВ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВ рд▓реЗрдХрд┐рди commits рд╕реЗ рдмрд╛рд╣рд░ рд░рдЦреА рдЬрд╛рддреА рд╣реИрдВ:
- `patch_raw.txt` - рдХрдЪреНрдЪрд╛ Copilot рдЖрдЙрдЯрдкреБрдЯ
- `todo.md` / `todo_completed.md` - рдХрд╛рд░реНрдп рдЪреЗрдХрд▓рд┐рд╕реНрдЯ
- `plan.json` - рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЬрдирд╛
- `commit_msg.txt` - рдЙрддреНрдкрдиреНрди commit рд╕рдВрджреЗрд╢
- `mr_summary.txt` - рдкрд░рд┐рд╡рд░реНрддрди рд╕рд╛рд░рд╛рдВрд╢

## ЁЯРЫ рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг

### Webhook рдЯреНрд░рд┐рдЧрд░ рдирд╣реАрдВ рд╣реЛ рд░рд╣рд╛ рд╣реИ

1. **webhook рдбрд┐рд▓реАрд╡рд░реА рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ**
   - рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рд┐рдкреЙ тЖТ Settings тЖТ Webhooks тЖТ View Recent Deliveries
   - 2xx status codes рджреЗрдЦреЗрдВ

2. **webhook рд╕реЗрд╡рд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ**
   ```bash
   curl -X POST https://gitlab-events.yourdomain.com/gitlab-events \
     -H "Content-Type: application/json" \
     -d '{"test": true}'
   ```

## ЁЯУБ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рдВрд░рдЪрдирд╛

```
.
тФЬтФАтФА src/
тФВ   тФЬтФАтФА __tests__/                     # рдЯреЗрд╕реНрдЯ рдлрд╝рд╛рдЗрд▓реЗрдВ
тФВ   тФЬтФАтФА lib/
тФВ   тФВ   тФЬтФАтФА gitlab-api.ts             # GitLab API рдХреНрд▓рд╛рдЗрдВрдЯ (@gitbeaker/rest)
тФВ   тФВ   тФЬтФАтФА prompt-loader.ts          # i18n рдкреНрд░реЙрдореНрдкреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рд▓реЛрдбрд░
тФВ   тФВ   тФЬтФАтФА git-helpers.ts            # Git рдпреВрдЯрд┐рд▓рд┐рдЯреА рдлрд╝рдВрдХреНрд╢рди
тФВ   тФВ   тФЬтФАтФА retry.ts                  # рд░реАрдЯреНрд░рд╛рдИ рдпреВрдЯрд┐рд▓рд┐рдЯреА
тФВ   тФВ   тФЬтФАтФА issue-workflow-service.ts # Issue рдСрдЯреЛрдореЗрд╢рди рд╕рд░реНрд╡рд┐рд╕
тФВ   тФВ   тФЬтФАтФА mr-update-service.ts      # MR рдЕрдкрдбреЗрдЯ рд╕рд░реНрд╡рд┐рд╕
тФВ   тФВ   тФФтФАтФА mr-review-service.ts      # MR рдХреЛрдб рд░рд┐рд╡реНрдпреВ рд╕рд░реНрд╡рд┐рд╕
тФВ   тФЬтФАтФА config.ts                     # Zod рд╡реИрд▓рд┐рдбреЗрд╢рди рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди
тФВ   тФЬтФАтФА types.ts                      # TypeScript рдЯрд╛рдЗрдкреНрд╕ рдФрд░ Zod рд╕реНрдХреАрдорд╛
тФВ   тФЬтФАтФА extractors.ts                 # рд╡реЗрд░рд┐рдПрдмрд▓ рдПрдХреНрд╕рдЯреНрд░реИрдХреНрд╢рди рд▓реЙрдЬрд┐рдХ
тФВ   тФЬтФАтФА pipeline.ts                   # Pipeline рдЯреНрд░рд┐рдЧрд░ рдХреНрд▓рд╛рдЗрдВрдЯ
тФВ   тФЬтФАтФА utils.ts                      # рдпреВрдЯрд┐рд▓рд┐рдЯреА рдлрд╝рдВрдХреНрд╢рди
тФВ   тФЬтФАтФА gitlab-events-handler.ts      # рдореБрдЦреНрдп webhook рд╣реИрдВрдбрд▓рд░
тФВ   тФЬтФАтФА index.ts                      # рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдПрдВрдЯреНрд░реА рдкреЙрдЗрдВрдЯ (Fastify)
тФВ   тФЬтФАтФА issue-workflow-cli.ts         # Issue рд╡рд░реНрдХрдлрд╝реНрд▓реЛ CLI (CI/CD рдХреЗ рд▓рд┐рдП)
тФВ   тФЬтФАтФА mr-update-cli.ts              # MR рдЕрдкрдбреЗрдЯ CLI (CI/CD рдХреЗ рд▓рд┐рдП)
тФВ   тФФтФАтФА mr-review-cli.ts              # MR рд░рд┐рд╡реНрдпреВ CLI (CI/CD рдХреЗ рд▓рд┐рдП)
тФЬтФАтФА prompts/                          # i18n рдкреНрд░реЙрдореНрдкреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ (en, ar, hi, ja, ko, th, zh)
тФЬтФАтФА hooks/                            # рд╕реЗрд╡ рдХрд┐рдП рдЧрдП webhook рдкреЗрд▓реЛрдб
тФЬтФАтФА logs/                             # рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЧ
тФФтФАтФА dist/                             # рдХрдВрдкрд╛рдЗрд▓реНрдб JavaScript
```

## ЁЯЫая╕П рдЯреЗрдХ рд╕реНрдЯреИрдХ

- **рд░рдирдЯрд╛рдЗрдо**: Node.js 20+
- **рдлреНрд░реЗрдорд╡рд░реНрдХ**: Fastify 5
- **рднрд╛рд╖рд╛**: TypeScript (strict рдореЛрдб)
- **AI SDK**: @github/copilot-sdk
- **рд╡реИрд▓рд┐рдбреЗрд╢рди**: Zod
- **рдЯреЗрд╕реНрдЯрд┐рдВрдЧ**: Jest + ts-jest
- **HTTP рдХреНрд▓рд╛рдЗрдВрдЯ**: Undici (рдиреЗрдЯрд┐рд╡ Node.js fetch)
- **Git рдСрдкрд░реЗрд╢рди**: simple-git
- **GitLab API**: @gitbeaker/rest
- **рд▓реЙрдЧрд┐рдВрдЧ**: Pino
- **i18n**: 7 рднрд╛рд╖рд╛рдПрдВ (en, zh, ja, hi, ko, th, ar)
